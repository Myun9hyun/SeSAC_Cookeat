<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>üìùCook Eat Drawers</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
        <!-- axios cdn -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <link rel="stylesheet" href="/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/static/posts.css" />
        <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet" />
        <%- include('nav.ejs') %> <%- include('footer.ejs') %> <%- include('account.ejs') %>
    </head>
    <body>
        <!-- <%#- include('nav.ejs') %> -->
        <br />
        <% if(!isData){%>
        <p class="noData"><%=message %></p>

        <%} else{%>

        <section class="container">
            <h1 style="color: #495057">ALL RECIPES</h1>
            <table class="lists">
                <button
                    class="custom-btn btn-12"
                    onclick="location.href = '/post' "
                    style="justify-content: center"
                >
                    <span>Cook eat!üç¥</span><span>ÏöîÎ¶¨ÏãúÏûë!üç¥</span>
                    <br />
                </button>
                <td class="total">Ï¥ù Í≤åÏãúÎ¨º: <%=totalPosts %></td>
                <thead>
                    <tr class="top">
                        <!-- <td class="items num">Î≤àÌò∏</td>
                        <td class="items identi">ID</td> -->
                        <td class="items category">Ïπ¥ÌÖåÍ≥†Î¶¨</td>
                        <td class="items postsTitle">Ï†úÎ™©</td>
                        <td class="items writer">ÏöîÎ¶¨ÏÇ¨</td>
                        <td class="items postsDate">ÏûëÏÑ±ÏùºÏûê</td>
                    </tr>
                </thead>

                <tbody>
                    <% for(let post of posts){ %>
                    <tr class="infomation">
                        <td class="infos postId"><%=post.id%></td>
                        <td class="infos id"><%=post.category%></td>
                        <td class="infos title">
                            <a href="/post/<%=post.postId%>"><%=post.title%></a>
                        </td>
                        <td class="infos User"><%=post.author.userName%></td>
                        <td class="infos createdAt"><%=post.dataValues.formattedDate%></td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
            <br />
            <!-- pagination ÏßÑÌñâÏòàÏ†ï -->
            <nav aria-label="Page navigation" class="d-flex justify-content-center">
                <ul class="pagination">
                    <!-- Ïù¥Ï†Ñ Î≤ÑÌäº -->
                    <% if (currentPage > 1) { %>
                    <li class="page-item">
                        <a
                            class="page-link"
                            href="/posts?page=<%= currentPage - 1 %>"
                            aria-label="Previous"
                        >
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <% } else { %>
                    <li class="page-item disabled">
                        <span class="page-link" aria-hidden="true">&laquo;</span>
                    </li>
                    <% } %>

                    <!-- ÌéòÏù¥ÏßÄ Î≤ÑÌäºÎì§ -->
                    <% for(let i = 1; i <= totalPages; i++) { %>
                    <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                        <a class="page-link" href="/posts?page=<%= i %>"><%= i %></a>
                    </li>
                    <% } %>

                    <!-- Ïù¥ÌõÑ Î≤ÑÌäº -->
                    <% if (currentPage < totalPages) { %>
                    <li class="page-item">
                        <a
                            class="page-link"
                            href="/posts?page=<%= currentPage + 1 %>"
                            aria-label="Next"
                        >
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                    <% } else { %>
                    <li class="page-item disabled">
                        <span class="page-link" aria-hidden="true">&raquo;</span>
                    </li>
                    <% } %>
                </ul>
            </nav>
        </section>
        <% } %>
        <div class="space"></div>
        <footer>
            <!-- <%#- include('footer.ejs') %> <%#- include('account.ejs') %> -->
            <!-- <script src="/js/bootstrap.min.js"></script> -->
            <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
                crossorigin="anonymous"
            ></script>
            <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        </footer>
    </body>
</html>
